# Migration `20201008041823-added-reports`

This migration has been generated by Zane Helton at 10/8/2020, 12:18:23 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Report" (
"id" text   NOT NULL ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"resolved" boolean   NOT NULL DEFAULT false,
"message" text   NOT NULL ,
"productId" text   NOT NULL ,
"userId" text   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."Report" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Report" ADD FOREIGN KEY ("productId")REFERENCES "public"."Product"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201008035601-fixed-favorites..20201008041823-added-reports
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgres"
-  url = "***"
+  url = "***"
 }
 enum AccountType {
   FREE
@@ -38,8 +38,9 @@
   payouts            Payout[]
   isVerified         Boolean       @default(false)
   verifiedAt         DateTime?
   withdraws          Withdraw[]
+  reports            Report[]
   // balance
   unpaidBalance Float @default(0)
   paidBalance   Float @default(0)
@@ -69,8 +70,9 @@
   fileId       String?
   promoCodes   PromoCode[]
   payouts      Payout[]
   users        User[]        @relation("Favorites", references: [id])
+  reports      Report[]
 }
 model Transaction {
   id              String      @id @default(uuid())
@@ -169,4 +171,15 @@
   confirmToken String   @default(cuid())
   user         User     @relation(fields: [userId], references: [id])
   userId       String
 }
+
+model Report {
+  id        String   @id @default(uuid())
+  createdAt DateTime @default(now())
+  resolved  Boolean  @default(false)
+  reporter  User     @relation(fields: [userId], references: [id])
+  message   String
+  product   Product  @relation(fields: [productId], references: [id])
+  productId String
+  userId    String
+}
```


