# Migration `20200831121103-add-tags`

This migration has been generated by Zane Helton at 8/31/2020, 8:11:03 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Tag" (
"id" SERIAL,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"creatorId" integer   NOT NULL ,
"name" text   NOT NULL ,
"productId" integer   ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."Tag" ADD FOREIGN KEY ("creatorId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Tag" ADD FOREIGN KEY ("productId")REFERENCES "public"."Product"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200831111226-caps-sanity-2..20200831121103-add-tags
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgres"
-  url = "***"
+  url = "***"
 }
 model User {
   id            Int           @default(autoincrement()) @id
@@ -17,8 +17,9 @@
   products      Product[]
   transactions  Transaction[]
   updatedAt     DateTime      @updatedAt
   username      String        @unique
+  Tag           Tag[]
 }
 model Product {
   id           Int           @default(autoincrement()) @id
@@ -28,8 +29,9 @@
   owner        User?         @relation(fields: [ownerId], references: [id])
   ownerId      Int?
   updatedAt    DateTime      @updatedAt
   transactions Transaction[]
+  tags         Tag[]
 }
 model Transaction {
   id        Int      @default(autoincrement()) @id
@@ -39,4 +41,12 @@
   createdAt DateTime @default(now())
   product   Product? @relation(fields: [productId], references: [id])
   productId Int?
 }
+
+model Tag {
+  id        Int      @default(autoincrement()) @id
+  createdAt DateTime @default(now())
+  creator   User     @relation(fields: [creatorId], references: [id])
+  creatorId Int
+  name      String
+}
```


