# Migration `20201008194516-ads`

This migration has been generated by Zane Helton at 10/8/2020, 3:45:16 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" DROP COLUMN "adTokens",
ADD COLUMN "adTokens" Decimal(65,30)   NOT NULL DEFAULT 0

CREATE TABLE "public"."Ad" (
"id" text   NOT NULL ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"days" integer   NOT NULL DEFAULT 10,
"productId" text   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."Ad" ADD FOREIGN KEY ("productId")REFERENCES "public"."Product"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201008082739-added-discord-id..20201008194516-ads
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgres"
-  url = "***"
+  url = "***"
 }
 enum AccountType {
   FREE
@@ -15,9 +15,9 @@
 model User {
   id                 String        @id @default(uuid())
   accountType        AccountType   @default(FREE)
-  adTokens           Int           @default(0)
+  adTokens           Float         @default(0)
   avatarURL          String?
   createdAt          DateTime      @default(now())
   createdTags        Tag[]
   discordId          String?
@@ -72,8 +72,9 @@
   promoCodes   PromoCode[]
   payouts      Payout[]
   users        User[]        @relation("Favorites", references: [id])
   reports      Report[]
+  ads          Ad[]
 }
 model Transaction {
   id              String      @id @default(uuid())
@@ -183,4 +184,11 @@
   product   Product  @relation(fields: [productId], references: [id])
   productId String
   userId    String
 }
+
+model Ad {
+  id        String   @id @default(uuid())
+  createdAt DateTime @default(now())
+  days      Int      @default(10)
+  product   Product
+}
```


