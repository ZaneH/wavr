# Migration `20200831122826-tag-deconnection`

This migration has been generated by Zane Helton at 8/31/2020, 8:28:26 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Tag" DROP CONSTRAINT "Tag_productId_fkey"

ALTER TABLE "public"."Tag" DROP COLUMN "productId"

CREATE TABLE "public"."_ProductToTag" (
"A" integer   NOT NULL ,
"B" integer   NOT NULL 
)

CREATE UNIQUE INDEX "_ProductToTag_AB_unique" ON "public"."_ProductToTag"("A", "B")

CREATE INDEX "_ProductToTag_B_index" ON "public"."_ProductToTag"("B")

ALTER TABLE "public"."_ProductToTag" ADD FOREIGN KEY ("A")REFERENCES "public"."Product"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_ProductToTag" ADD FOREIGN KEY ("B")REFERENCES "public"."Tag"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200831122044-tag-connections..20200831122826-tag-deconnection
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgres"
-  url = "***"
+  url = "***"
 }
 model User {
   id            Int           @default(autoincrement()) @id
@@ -43,12 +43,11 @@
   productId Int?
 }
 model Tag {
-  id        Int      @default(autoincrement()) @id
-  createdAt DateTime @default(now())
-  creator   User     @relation(fields: [creatorId], references: [id])
+  id        Int       @default(autoincrement()) @id
+  createdAt DateTime  @default(now())
+  creator   User      @relation(fields: [creatorId], references: [id])
   creatorId Int
   name      String
-  product   Product? @relation(fields: [productId], references: [id])
-  productId Int?
+  products  Product[]
 }
```


